#:import Gradient kivy_gradient.Gradient
#:import get_color_from_hex kivy.utils.get_color_from_hex

WindowManager:
    canvas.before: 
        Rectangle:
            pos: self.pos
            size: self.size
            texture: 
                Gradient.vertical(
                get_color_from_hex("102B70"),
                get_color_from_hex("0E43CE")
                )
    WelcomeScreen:
    LoginScreen:
    VotingOrLiveScreen:
    VotingScreen:

<WelcomeScreen>:
    name: "welcome"
    canvas.before: 
        Rectangle:
            pos: self.pos
            size: self.size
            texture: 
                Gradient.vertical(
                get_color_from_hex("102B70"),
                get_color_from_hex("0E43CE")
                )
    BoxLayout: 
        padding: 10
        orientation: "vertical"
        size: root.width, root.height

        Label: 
            markup: True
            text: "The [color=#0C97D3][b]Move[/b][/color]"
            font_size: 64
            text_size: self.size
            valign: "bottom"
            halign: "center"
            size_hint: 1, 0.5

        Label: 
            text: "Welcome to The Move! Plan your nights better by seeing what bars and clubs are the most popular"
            #text_size: self.width, None
            font_size: 16
            text_size: self.size
            valign: "top"
            halign: "center"
            size_hint: 1, 0.5

        AnchorLayout: 
            NextButton1:
                text: "Continue"
                size_hint: (0.5, 0.25)
                pos_hint: {"center_x": 0.5, "center_y": 0.5}
                on_release: 
                    app.root.current = "login_screen"
                    root.manager.transition.direction = "left"

<LoginScreen>:
    name: "login_screen"
    BoxLayout: 
        orientation: "vertical"
        Label: 
            text_size: self.size
            font_size: 16
            valign: "center"
            halign: "center"
            text: "Please enter you're daily login code. If you haven't logged in today or forgot your code, click request new code below"
        BoxLayout:
            padding: 32
            TextInput1:
                font_size: 16
                id: idInputBox
        BoxLayout: 
            padding: 20
            spacing: 20
            RequestButton:
                text_size: self.size
                valign: "center"
                halign: "center"
                text: "Request new code"
                on_release: root.requestIDPressed()
            SubmitButton1: 
                text: "Submit"
                on_release: 
                    root.submitLoginPressed()
                    #app.root.current = "voting_or_live"
                    #root.manager.transition.direction = "left"
        Label: 
            id: newLoginDisplay
            text_size: self.size
            valign: "center"
            halign: "center"
            text: root.newLoginText
        AnchorLayout: 
            BackButton1:
                text: "Back"
                size_hint: (0.5, 0.5)
                pos_hint: {"center_x": 0.5, "center_y": 0.5}
                on_release: 
                    app.root.current = "welcome"
                    root.manager.transition.direction = "right"
        Label: 
            font_size: 12
            text_size: self.size
            valign: "center"
            halign: "center"
            text: "We don't like the hassle of accounts and we're sure you don't either, so we created daily login codes. These codes help us keep track of user votes for the day. We value your privacy, so all codes are deleted at the end of the day." 
        
<VotingOrLiveScreen>:
    name: "voting_or_live"
    canvas.before: 
        Rectangle:
            pos: self.pos
            size: self.size
            texture: 
                Gradient.vertical(
                get_color_from_hex("102B70"),
                get_color_from_hex("0E43CE")
                )
    BoxLayout: 
        orientation: "vertical"
        size: root.width, root.height
        spacing: 20
        padding: 50
        VotingButton:
            font_size: 12
            markup: True
            text: "[size=24]Voting[/size]\nSee how other users are planning to spend their night, and vote where you want to go!"
            size_hint: (1, 0.5)
            text_size: self.size
            halign: "center"
            valign: "center"
            on_release: 
                app.root.current = "voting"
                root.manager.transition.direction = "left"
        LiveDataButton:
            font_size: 18
            text: "Live Data (Coming Soon)"
            size_hint: (1, 0.5)
        AnchorLayout: 
            BackButton1:
                text: "Back"
                size_hint: (0.5, 0.25)
                pos_hint: {"center_x": 0.5, "center_y": 0.5}
                on_release: 
                    app.root.current = "welcome"
                    root.manager.transition.direction = "right"


<VotingScreen>:
    name: "voting"
    canvas.before: 
        Rectangle:
            pos: self.pos
            size: self.size
            texture: 
                Gradient.vertical(
                get_color_from_hex("2446A1"),
                get_color_from_hex("2446A1")
                )
    ScrollView: 
        StackLayout: 
            size_hint: 1, None
            height: self.minimum_height + 100
            spacing: 20
            padding: 20
            Label: 
                size_hint: (1, None)
                height: "60dp"
            ToggleButton1: 
                name: "0"
                id: 0
                text: "[size=20]Grog[/size]\n Number of votes: 0"
                on_state: root.togglePressed(self)

            ToggleButton2:
                name: "1"
                id: 1
                text: "[size=20]Fats Midtown[/size]\n Number of votes: 0"
                on_state: root.togglePressed(self)

            ToggleButton1:
                name: "2"
                id: 2
                text: "[size=20]Fats Downtown[/size]\n Number of votes: 0"
                on_state: root.togglePressed(self)

            ToggleButton2:
                name: "3"
                id: 3
                text: "[size=20]White Buffalo[/size]\n Number of votes: 0"
                on_state: root.togglePressed(self)

            ToggleButton1:
                name: "4"
                id: 4
                text: "[size=20]The Lab[/size]\n Number of votes: 0"
                on_state: root.togglePressed(self)

            ToggleButton2:
                name: "5"
                id: 5
                text: "[size=20]The Social[/size]\n Number of votes: 0"
                on_state: root.togglePressed(self)

            ToggleButton1:
                name: "6"
                id: 6
                text: "[size=20]Bricks[/size]\n Number of votes: 0"
                on_state: root.togglePressed(self)

            ToggleButton2:
                name: "7"
                id: 7
                text: "[size=20]JJ's[/size]\n Number of votes: 0"
                on_state: root.togglePressed(self)

            ToggleButton1:
                name: "8"
                id: 8
                text: "[size=20]Rowdy Reptile[/size]\n Number of votes: 0"
                on_state: root.togglePressed(self)

            ToggleButton2:
                name: "9"
                id: 9
                text: "[size=20]Salty Dog Saloon[/size]\n Number of votes: 0"
                on_state: root.togglePressed(self)

    BoxLayout:
        pos_hint:{"center_x":.5, "top":1}
        orientation: "vertical"
        size_hint: (1, None)
        height: "100dp"
        VoteStatusLabel: 
            id: hasVoted
            text: root.hasVotedText
            halign: "center"
            
    BoxLayout:
        canvas.before: 
            Color: 
                rgba: get_color_from_hex("2446A1")
            Rectangle:
                pos: self.pos
                size: self.size
        size_hint: 1, None
        height: "100dp"
        orientation: "horizontal"
        spacing: 10
        padding: 10
        BackButton2:
            text: "Back"
            on_release: 
                app.root.current = "voting_or_live"
                root.manager.transition.direction = "right"
        SubmitButton2: 
            text: "Submit Vote"
            on_release: root.submitPressed()

            

#welcome screen 
<Label1@Label>:
    background_color: 0, 0, 0, 0
    background_normal: ""
    canvas.before:
        Color: 
            rgba: (0, 0, 0, 0)
        RoundedRectangle: 
            size: self.size
            pos: self.pos
            radius: [5]

<NextButton1@Button>:
    background_color: 0, 0, 0, 0
    background_normal: ""
    canvas.before:
        Color: 
            rgba: (220/255, 102/255, 15/255, 1)
        RoundedRectangle: 
            size: self.size
            pos: self.pos
            radius: [0, 50, 0, 50]
    
#Login Screen
<TextInput1@TextInput>

<SubmitButton1@Button>
    background_color: 0, 0, 0, 0
    background_normal: ""
    canvas.before:
        Color: 
            rgba: get_color_from_hex("153D61")
        RoundedRectangle: 
            size: self.size
            pos: self.pos
            radius: [10]

<RequestButton@Button>:
    background_color: 0, 0, 0, 0
    background_normal: ""
    canvas.before:
        Color: 
            rgba: get_color_from_hex("DC660F")
        RoundedRectangle: 
            size: self.size
            pos: self.pos
            radius: [10]

<BackButton1@Button>:
    background_color: 0, 0, 0, 0
    background_normal: ""
    canvas.before:
        Color: 
            rgba: get_color_from_hex("DC660F")
        RoundedRectangle: 
            size: self.size
            pos: self.pos
            radius: [10]


#voting or live data
<VotingButton@Button>:
    background_color: 0, 0, 0, 0
    background_normal: ""
    canvas.before:
        Color: 
            rgba: get_color_from_hex("DC660F")
        RoundedRectangle: 
            size: self.size
            pos: self.pos
            radius: [20]

<LiveDataButton@Button>:
    background_color: 0, 0, 0, 0
    background_normal: ""
    canvas.before:
        Color: 
            rgba: (48/255, 84/255, 150/255, 1)
        RoundedRectangle: 
            size: self.size
            pos: self.pos
            radius: [20]



#voting screen
<VoteStatusLabel@Label>
    markup: True
    canvas.before: 
        Color: 
            rgba: get_color_from_hex("2446A1")
        Rectangle:
            pos: self.pos
            size: self.size

<ToggleButton1@ToggleButton>:
    halign: "center"
    group: "clubs"
    size_hint: (1, None)
    height: "100dp"
    markup: True
    background_normal: ''
    background_down: ''
    color: 
        {'normal': get_color_from_hex("FFFFFF"), 'down': get_color_from_hex("C73E09")} [self.state]
    background_color: 
        {'normal': get_color_from_hex("C73E09"), 'down': (get_color_from_hex("FFFFFF"))} [self.state]
    border_radius: [20]

<ToggleButton2@ToggleButton>:
    halign: "center"
    group: "clubs"
    size_hint: (1, None)
    height: "100dp"
    markup: True
    background_normal: ''
    background_down: ''
    color: 
        {'normal': get_color_from_hex("FFFFFF"), 'down': get_color_from_hex("102B70")} [self.state]
    background_color: 
        {'normal': get_color_from_hex("102B70"), 'down': get_color_from_hex("FFFFFF")} [self.state]


<BackButton2@Button>:
    background_color: 0, 0, 0, 0
    background_normal: ""
    canvas.before:
        Color: 
            rgba: get_color_from_hex("DC660F")
        RoundedRectangle: 
            size: self.size
            pos: self.pos
            radius: [10]
    
<SubmitButton2@Button>:
    background_color: 0, 0, 0, 0
    background_normal: ""
    canvas.before:
        Color: 
            rgba: get_color_from_hex("153D61")
        RoundedRectangle: 
            size: self.size
            pos: self.pos
            radius: [10]